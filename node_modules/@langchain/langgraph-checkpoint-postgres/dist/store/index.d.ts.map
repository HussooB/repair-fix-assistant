{"version":3,"file":"index.d.ts","names":["BaseStore","Operation","OperationResults","Item","PostgresStoreConfig","SearchItem","FilterOperators","PostgresStore","Record","Promise","Omit","Op","Date"],"sources":["../../src/store/index.d.ts"],"sourcesContent":["import { BaseStore, type Operation, type OperationResults, type Item } from \"@langchain/langgraph-checkpoint\";\n// Import types\nimport type { PostgresStoreConfig, SearchItem, FilterOperators } from \"./modules/types.js\";\nexport type * from \"./modules/types.js\";\n/**\n * PostgreSQL implementation of the BaseStore interface.\n * This is now a lightweight orchestrator that delegates to specialized modules.\n */\nexport declare class PostgresStore extends BaseStore {\n    private core;\n    private vectorOps;\n    private crudOps;\n    private searchOps;\n    private ttlManager;\n    private isSetup;\n    private isClosed;\n    private ensureTables;\n    constructor(config: PostgresStoreConfig);\n    /**\n     * Put an item with optional indexing configuration and TTL.\n     */\n    put(namespace: string[], key: string, value: Record<string, unknown>, index?: false | string[], options?: {\n        ttl?: number;\n    }): Promise<void>;\n    /**\n     * Get an item by namespace and key.\n     */\n    get(namespace: string[], key: string): Promise<Item | null>;\n    /**\n     * Delete an item by namespace and key.\n     */\n    delete(namespace: string[], key: string): Promise<void>;\n    /**\n     * List namespaces with optional filtering.\n     */\n    listNamespaces(options?: {\n        prefix?: string[];\n        suffix?: string[];\n        maxDepth?: number;\n        limit?: number;\n        offset?: number;\n    }): Promise<string[][]>;\n    /**\n     * Creates a PostgresStore instance from a connection string.\n     */\n    static fromConnString(connectionString: string, options?: Omit<PostgresStoreConfig, \"connectionOptions\">): PostgresStore;\n    /**\n     * Initialize the store by running migrations to create necessary tables and indexes.\n     */\n    setup(): Promise<void>;\n    private runStoreMigrations;\n    /**\n     * Execute multiple operations in a single batch.\n     */\n    batch<Op extends Operation[]>(operations: Op): Promise<OperationResults<Op>>;\n    private executeListNamespaces;\n    /**\n     * Start the store. Calls setup() if ensureTables is true.\n     */\n    start(): Promise<void>;\n    /**\n     * Stop the store and close all database connections.\n     */\n    stop(): Promise<void>;\n    /**\n     * Manually sweep expired items from the store.\n     */\n    sweepExpiredItems(): Promise<number>;\n    private textSearch;\n    /**\n     * Get statistics about the store.\n     */\n    getStats(): Promise<{\n        totalItems: number;\n        expiredItems: number;\n        namespaceCount: number;\n        oldestItem: Date | null;\n        newestItem: Date | null;\n    }>;\n    /**\n     * Performs vector similarity search using embeddings.\n     *\n     * @param namespacePrefix - The namespace prefix to search within\n     * @param query - The text query to embed and search for similar items\n     * @param options - Search options including filter, similarity threshold, and distance metric\n     * @returns Promise resolving to an array of search results with similarity scores\n     */\n    protected vectorSearch(namespacePrefix: string[], query: string, options?: {\n        filter?: Record<string, unknown>;\n        limit?: number;\n        offset?: number;\n        similarityThreshold?: number;\n        distanceMetric?: \"cosine\" | \"l2\" | \"inner_product\";\n    }): Promise<SearchItem[]>;\n    /**\n     * Performs hybrid search combining vector similarity and text search.\n     *\n     * @param namespacePrefix - The namespace prefix to search within\n     * @param query - The text query to search for\n     * @param options - Search options including filter, vector weight, and similarity threshold\n     * @returns Promise resolving to an array of search results with combined similarity scores\n     */\n    protected hybridSearch(namespacePrefix: string[], query: string, options?: {\n        filter?: Record<string, unknown>;\n        limit?: number;\n        offset?: number;\n        vectorWeight?: number;\n        similarityThreshold?: number;\n    }): Promise<SearchItem[]>;\n    /**\n     * Search for items in the store with support for text search, vector search, and filtering.\n     *\n     * @param namespacePrefix - The namespace prefix to search within\n     * @param options - Search options including search mode, filters, query text, and pagination\n     * @returns Promise resolving to an array of search results with optional similarity scores\n     *\n     * @example\n     * ```typescript\n     * // Basic text search\n     * const results = await store.search([\"documents\"], {\n     *   query: \"machine learning\",\n     *   mode: \"text\"\n     * });\n     *\n     * // Vector search\n     * const results = await store.search([\"documents\"], {\n     *   query: \"machine learning\",\n     *   mode: \"vector\",\n     *   similarityThreshold: 0.7\n     * });\n     *\n     * // Hybrid search (combining vector and text)\n     * const results = await store.search([\"documents\"], {\n     *   query: \"machine learning\",\n     *   mode: \"hybrid\",\n     *   vectorWeight: 0.7\n     * });\n     *\n     * // Filtered search\n     * const results = await store.search([\"products\"], {\n     *   filter: { category: \"electronics\", price: { $lt: 100 } }\n     * });\n     * ```\n     */\n    search(namespacePrefix: string[], options?: {\n        /**\n         * Filter conditions with support for advanced operators.\n         */\n        filter?: Record<string, string | number | boolean | null | FilterOperators>;\n        /**\n         * Natural language search query.\n         */\n        query?: string;\n        /**\n         * Maximum number of results to return.\n         * @default 10\n         */\n        limit?: number;\n        /**\n         * Number of results to skip for pagination.\n         * @default 0\n         */\n        offset?: number;\n        /**\n         * Whether to refresh TTL for returned items.\n         */\n        refreshTtl?: boolean;\n        /**\n         * Search mode.\n         * @default \"auto\"\n         */\n        mode?: \"text\" | \"vector\" | \"hybrid\" | \"auto\";\n        /**\n         * Similarity threshold for vector search.\n         */\n        similarityThreshold?: number;\n        /**\n         * Distance metric for vector search.\n         * @default \"cosine\"\n         */\n        distanceMetric?: \"cosine\" | \"l2\" | \"inner_product\";\n        /**\n         * Weight for vector search in hybrid mode.\n         * @default 0.7\n         */\n        vectorWeight?: number;\n    }): Promise<SearchItem[]>;\n}\n"],"mappings":";;;;;AAQA;;;;AAeQS,cAfaF,aAAAA,SAAsBP,SAAAA,CAenCS;UAI2CN,IAAAA;UAARM,SAAAA;UAIGA,OAAAA;UAUtCA,SAAAA;UAI2DL,UAAAA;UAALM,OAAAA;UAAiDH,QAAAA;UAIlGE,YAAAA;aAKQR,CAAAA,MAAAA,EArCGG,mBAqCHH;;;;KAA8BQ,CAAAA,SAAAA,EAAAA,MAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,EAAAA,KAAAA,EAjCFD,MAiCEC,CAAAA,MAAAA,EAAAA,OAAAA,CAAAA,EAAAA,KAAAA,CAAAA,EAAAA,KAAAA,GAAAA,MAAAA,EAAAA,EAAAA,QAAAA,EAAAA;IAKtCA,GAAAA,CAAAA,EAAAA,MAAAA;MApCLA,OAwCIA,CAAAA,IAAAA,CAAAA;;;;KASIA,CAAAA,SAAAA,EAAAA,MAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,CAAAA,EA7C2BA,OA6C3BA,CA7CmCN,IA6CnCM,GAAAA,IAAAA,CAAAA;;;;QA+BCD,CAAAA,SAAAA,EAAAA,MAAAA,EAAAA,EAAAA,GAAAA,EAAAA,MAAAA,CAAAA,EAxE6BC,OAwE7BD,CAAAA,IAAAA,CAAAA;;;;gBA6CAA,CAAAA,QAAAA,EAAAA;IAsCDH,MAAAA,CAAAA,EAAAA,MAAAA,EAAAA;IAARI,MAAAA,CAAAA,EAAAA,MAAAA,EAAAA;IAlLmCT,QAAAA,CAAAA,EAAAA,MAAAA;;;MAiCnCS;;;;4DAIsDC,KAAKN,4CAA4CG;;;;WAIlGE;;;;;mBAKQR,yBAAyBU,KAAKF,QAAQP,iBAAiBS;;;;;WAK/DF;;;;UAIDA;;;;uBAIaA;;;;;cAKTA;;;;gBAIIG;gBACAA;;;;;;;;;;;aAWHJ;;;;;MAKTC,QAAQJ;;;;;;;;;;aAUCG;;;;;MAKTC,QAAQJ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;aAwCCG,kDAAkDF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAsC3DG,QAAQJ"}